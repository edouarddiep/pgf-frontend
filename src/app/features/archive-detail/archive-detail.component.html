<div class="archive-detail-page">
  @if (archive(); as arch) {
    <section class="hero-banner scroll-fade-in">
      <div class="hero-content">
        <h1>{{ arch.title }}</h1>
        <p class="year">{{ arch.year }}</p>
      </div>
    </section>

    @if (arch.description) {
      <section class="description-section scroll-fade-in">
        <div class="container">
          <p>{{ arch.description }}</p>
        </div>
      </section>
    }

    @if (arch.files && arch.files.length > 0) {
      <section class="files-section scroll-fade-in">
        <div class="container">
          <div class="files-grid">
            @for (file of arch.files; track file.id) {
              <div class="file-item">
                @if (file.fileType === 'IMAGE') {
                  <div class="file-media">
                    <img [src]="file.fileUrl" [alt]="file.fileName || arch.title" loading="lazy">
                  </div>
                } @else if (file.fileType === 'VIDEO') {
                  <div class="file-media video">
                    @if (isYouTubeUrl(file.fileUrl)) {
                      <iframe
                        [src]="getSafeUrl(file.fileUrl)"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                      </iframe>
                    } @else {
                      <video controls>
                        <source [src]="file.fileUrl" type="video/mp4">
                      </video>
                    }
                  </div>
                } @else if (file.fileType === 'AUDIO') {
                  <div class="file-media audio">
                    <audio controls>
                      <source [src]="file.fileUrl" type="audio/mpeg">
                    </audio>
                    @if (file.fileName) {
                      <p class="file-name">{{ file.fileName }}</p>
                    }
                  </div>
                } @else if (file.fileType === 'PDF') {
                  <div class="file-media pdf">
                    <a [href]="file.fileUrl" target="_blank" rel="noopener noreferrer">
                      <span class="pdf-icon">ðŸ“„</span>
                      <span class="pdf-label">{{ file.fileName || 'Voir le PDF' }}</span>
                    </a>
                  </div>
                }
              </div>
            }
          </div>
        </div>
      </section>
    }
  }
</div>
